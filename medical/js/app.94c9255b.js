(function(e){function t(t){for(var r,s,o=t[0],u=t[1],c=t[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("8a23"),a=n.n(r);a.a},"0b94":function(e,t,n){"use strict";t["a"]=function(){}},1:function(e,t){},2:function(e,t){},"28cd":function(e,t,n){},3:function(e,t){},"4d86":function(e,t,n){"use strict";var r=n("28cd"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("c4bc");var r,a,i=n("2b0e"),s=n("64d1"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("resizable-nav-drawer",{attrs:{id:"left-nav",app:"",permanent:"","min-width":250,"max-width":450,width:350,"handle-size":4}},[n("div",{attrs:{id:"left-pane-outer"}},[n("div",{attrs:{id:"left-pane"}},[n("div",{staticClass:"mt-1 mb-2",attrs:{id:"module-switcher"}},[n("v-select",{staticClass:"no-select",attrs:{outlined:"","single-line":"","hide-details":"","prepend-inner-icon":"mdi-"+e.selectedModule.icon,items:e.Modules,"item-text":"name","return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[r.icon?n("v-icon",{staticClass:"mr-1"},[e._v("mdi-"+e._s(r.icon))]):e._e(),e._v(" "+e._s(r.name)+" ")]}}]),model:{value:e.selectedModule,callback:function(t){e.selectedModule=t},expression:"selectedModule"}})],1),n("div",{attrs:{id:"module-container"}},[e._l(e.Modules,(function(t){return[n(t.component,{directives:[{name:"show",rawName:"v-show",value:e.selectedModule===t,expression:"selectedModule === mod"}],key:t.name,tag:"component"})]}))],2)])])]),n("v-content",{attrs:{id:"content-wrapper"}},[n("div",{staticClass:"d-flex flex-row flex-grow-1 grey darken-3"},[n("div",{staticClass:"grey darken-4 d-flex flex-column align-center",attrs:{id:"tools-strip"}},[n("tool-button",{attrs:{size:"40",icon:"mdi-folder-open",name:"Open files",buttonClass:"tool-btn"}}),n("div",{staticClass:"mt-2 mb-1 tool-separator"}),n("tool-button",{attrs:{size:"40",icon:"mdi-view-grid-outline",name:"View\n          layouts",buttonClass:"tool-btn"}}),n("div",{staticClass:"mt-2 mb-1 tool-separator"}),n("v-item-group",{model:{value:e.selectedTool,callback:function(t){e.selectedTool=t},expression:"selectedTool"}},[e._l(e.Tools,(function(t,r){return[n("v-item",{key:r,scopedSlots:e._u([{key:"default",fn:function(e){var r=e.active,a=e.toggle;return[n("tool-button",{attrs:{size:"40",icon:"mdi-"+t.icon,name:t.name,buttonClass:["tool-btn",r?"tool-btn-selected":""]},on:{click:a}})]}}],null,!0)})]}))],2)],1),n("div",{staticClass:"d-flex flex-column flex-grow-1"},[e.datasets.length?[n("layout-grid",{attrs:{layout:e.layout}})]:[n("v-row",{staticClass:"clickable",attrs:{"no-gutters":"",align:"center"},on:{click:e.userPromptFiles}},[n("v-col",[n("v-row",{attrs:{justify:"center"}},[n("v-card",{staticClass:"text-center headline",attrs:{flat:"",dark:"",color:"transparent"}},[n("div",[n("v-icon",{attrs:{size:"64"}},[e._v("mdi-folder-open")])],1),n("div",[e._v(" Click anywhere here to open files ")]),n("div",{staticClass:"mt-8"},[n("v-icon",{attrs:{size:"64"}},[e._v("mdi-arrow-down-bold")])],1),n("div",[e._v(" Drop your files anywhere here to open ")])])],1)],1)],1)]],2)])])],1)},u=[],c=(n("a630"),n("3ca3"),n("5530")),l=n("2f62"),d=(n("a9e3"),n("f774")),p="ew-resize",h={name:"ResizableNavDrawer",props:{minWidth:Number,maxWidth:Number,width:Number,handleSize:{type:Number,default:4}},data:function(){return{internalWidth:this.width}},computed:{handleSizeCSS:function(){return"".concat(this.handleSize,"px")}},mounted:function(){this.oldCursor="",this.oldUserSelect="",this.setResizableStyles(),this.setEvents()},beforeDestroy:function(){this.clearEvents(),this.stopResize()},render:function(e){return e(d["a"],{props:Object(c["a"])({},this.$attrs,{width:this.internalWidth}),on:this.$listeners,scopedSlots:this.$scopedSlots,ref:"infoPane"},this.$slots.default)},methods:{setResizableStyles:function(){var e=this.$refs.infoPane.$el.querySelector(".v-navigation-drawer__border");e.style.width=this.handleSizeCSS,e.style.backgroundColor="transparent","right"in this.$attrs?e.style.borderLeft="2px solid rgba(0, 0, 0, 0.24)":e.style.borderRight="2px solid rgba(0, 0, 0, 0.24)",e.style.cursor=p},setEvents:function(){var e=this.$refs.infoPane.$el.querySelector(".v-navigation-drawer__border");e.addEventListener("mousedown",this.startResize)},clearEvents:function(){var e=this.$refs.infoPane.$el.querySelector(".v-navigation-drawer__border");e.removeEventListener("mousedown",this.startResize),document.removeEventListener("mouseup",this.stopResize)},startResize:function(){this.$refs.infoPane.$el.style.transition="initial",this.setCursor(p),this.disableSelection(),document.addEventListener("mousemove",this.handleResize),document.addEventListener("mouseup",this.stopResize)},stopResize:function(){this.$refs.infoPane.$el.style.transition="",this.resetCursor(),this.resetSelection(),document.removeEventListener("mousemove",this.handleResize)},handleResize:function(e){var t="right"in this.$attrs?document.body.scrollWidth-e.clientX:e.clientX,n=this.minWidth||this.handleSize,r=this.maxWidth||1/0;this.internalWidth=Math.min(r,Math.max(n,t)),this.$emit("resize",this.internalWidth)},setCursor:function(e){this.oldCursor=document.body.style.cursor,document.body.style.cursor=e},resetCursor:function(){document.body.style.cursor=this.oldCursor,this.oldCursor=""},disableSelection:function(){this.oldUserSelect=document.body.style.userSelect,document.body.style.userSelect="none"},resetSelection:function(){document.body.style.userSelect=this.oldUserSelect,this.oldUserSelect=""}}},f=h,m=n("2877"),v=Object(m["a"])(f,r,a,!1,null,null,null),b=v.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{right:"",transition:"slide-x-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g(e._b({class:e.classV,attrs:{text:"",tile:"",dark:"",height:e.sizeV,width:e.sizeV,"min-width":e.sizeV,"max-width":e.sizeV}},"v-btn",e.$attrs,!1),Object.assign({},r,e.$listeners)),[n("v-icon",{attrs:{size:e.iconSize}},[e._v(e._s(e.icon))])],1)]}}])},[n("span",[e._v(e._s(e.name))])])},y=[],w=(n("4de4"),n("a15b"),n("b64b"),{name:"ToolButton",props:{icon:{type:String,required:!0},name:{type:String,required:!0},size:{type:[Number,String],default:40},buttonClass:[String,Array,Object]},computed:{sizeV:function(){return Number(this.size)},iconSize:function(){return Math.floor(.6*this.sizeV)},classV:function(){var e=this,t=this.buttonClass;return"string"===typeof t?t:Array.isArray(t)?t.join(" "):t&&Object.keys(t).length?Object.keys(this.buttonClass).filter((function(t){return e.buttonClass[t]})).join(" "):""}}}),x=w,S=n("6544"),k=n.n(S),D=n("8336"),I=n("132d"),C=n("3a2f"),R=Object(m["a"])(x,g,y,!1,null,null,null),O=R.exports;k()(R,{VBtn:D["a"],VIcon:I["a"],VTooltip:C["a"]});var $=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],staticClass:"container",class:e.active?"active":"",attrs:{fluid:"","fill-height":""}},[n("div",{staticClass:"sub-container"},[n("div",{ref:"vtkContainer",staticClass:"vtk-view"})])])},j=[],P={name:"VtkView",props:{active:Boolean},mounted:function(){var e=this;this.view=this.$proxyManager.createProxy("Views","ViewZ",{name:"Z"}),this.view.getRenderer().setBackground(0,0,0),this.$nextTick((function(){e.onResize(),e.resetCamera()}))},methods:{onResize:function(){this.view&&(this.view.resize(),this.view.renderLater())},resetCamera:function(){this.view&&this.view.resetCamera()}}},M=P,V=(n("4d86"),n("a523")),T=n("269a"),_=n.n(T),z=n("dc22"),E=Object(m["a"])(M,$,j,!1,null,"42c60925",null),A=E.exports;k()(E,{VContainer:V["a"]}),_()(E,{Resize:z["a"]});var N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex flex-grow-1",class:e.flexFlow},e._l(e.items,(function(e,t){return n("div",{key:t,staticClass:"d-flex flex-grow-1"},[Array.isArray(e)?n("layout-grid",{attrs:{layout:e}}):n(e,{tag:"component"})],1)})),0)},U=[],F=(n("fb6a"),{name:"LayoutGrid",props:{layout:Array},computed:{flexFlow:function(){var e=this.layout[0];return"H"===e?"flex-column":"flex-row"},items:function(){return this.layout.slice(1)}}}),L=F,B=Object(m["a"])(L,N,U,!1,null,null,null),W=B.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mx-2 height-100",attrs:{id:"patient-module"}},[n("div",{attrs:{id:"patient-filter-controls"}},[n("v-select",{staticClass:"no-select",attrs:{items:e.patients,"item-text":"label","item-value":"id",dense:"",filled:"","single-line":"","hide-details":"",label:"Patient","prepend-icon":"mdi-account"},model:{value:e.patientID,callback:function(t){e.patientID=t},expression:"patientID"}}),n("v-select",{staticClass:"no-select mt-2",attrs:{items:e.studies,"item-text":"label","item-value":"id",dense:"",filled:"","single-line":"","hide-details":"",label:"Study","prepend-icon":"mdi-folder-table"},model:{value:e.studyUID,callback:function(t){e.studyUID=t},expression:"studyUID"}})],1),n("div",{attrs:{id:"patient-data-list"}},[n("v-expansion-panels",{attrs:{accordion:"",multiple:"",id:"patient-data-list-panels"}},[e._l(e.seriesList,(function(t,r){return[n("v-expansion-panel",{key:r},[n("v-expansion-panel-header",{staticClass:"no-select subtitle-2",attrs:{color:"#1976fa0a"}},[n("v-row",{attrs:{"no-gutters":"",align:"center"}},[n("v-col",[e._v(e._s(t.description))])],1)],1),n("v-expansion-panel-content",[n("div",{staticClass:"d-flex flex-row flex-wrap ma-2"},[e._l(e.seriesImages[t.instanceUID],(function(t,r){return[n("img",{key:r,staticClass:"meow",attrs:{src:e.imageToDataURL(t)}})]}))],2)])],1)]}))],2)],1)])},Z=[],q=(n("a4d3"),n("e01a"),n("99af"),n("d81d"),n("b0c0"),document.createElement("canvas"));function G(e){q.width=e.cols,q.height=e.rows;for(var t=q.getContext("2d"),n=t.createImageData(q.width,q.height),r=0,a=0;r<e.pixelData.length;r+=1,a+=4){var i=Math.floor((e.pixelData[r]-e.minValue)/e.maxValue*255);n.data[a+0]=i,n.data[a+1]=i,n.data[a+2]=i,n.data[a+3]=255}return t.putImageData(n,0,0),q.toDataURL("image/png")}var H={name:"DataBrowser",data:function(){return{patientID:"",studyUID:""}},computed:Object(c["a"])({},Object(l["c"])("datasets",{patients:function(e){return e.patients.map((function(e){return{id:e.patientID,label:"".concat(e.name," (").concat(e.patientID,")")}}))},studies:function(e){return(e.patientStudies[this.patientID]||[]).map((function(e){return{id:e.instanceUID,label:"".concat(e.description)}}))},seriesList:function(e){return e.studySeries[this.studyUID]||[]},seriesImages:"seriesImages"})),watch:{patientID:function(){this.studyUID=""}},methods:{imageToDataURL:G}},Y=H,J=(n("7084"),n("73b7"),n("62ad")),K=n("cd55"),Q=n("49e2"),ee=n("c865"),te=n("0393"),ne=n("0fd9"),re=n("b974"),ae=Object(m["a"])(Y,X,Z,!1,null,"d0868a1e",null),ie=ae.exports;k()(ae,{VCol:J["a"],VExpansionPanel:K["a"],VExpansionPanelContent:Q["a"],VExpansionPanelHeader:ee["a"],VExpansionPanels:te["a"],VRow:ne["a"],VSelect:re["a"]});var se=-1,oe=[{name:"Patients",icon:"account",component:ie},{name:"Measurements",icon:"pencil-ruler",component:null}],ue=[{name:"Paint",icon:"brush"},{name:"Box",icon:"selection"},{name:"Ellipse",icon:"selection-ellipse"},{name:"Crop",icon:"crop"}],ce={name:"App",components:{ResizableNavDrawer:b,ToolButton:O,LayoutGrid:W},data:function(){return{datasets:[],activeDatasetIndex:se,selectedTool:null,selectedModule:oe[0],layout:["H",A,["V",null,A,null]],Tools:ue,Modules:oe}},computed:{activeDataset:function(){return this.activeDatasetIndex===se?null:this.datasets[this.activeDatasetIndex]}},mounted:function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("multiple","multiple"),e.setAttribute("accept","*"),e.addEventListener("change",this.onFileSelect),this.fileEl=e},methods:Object(c["a"])({userPromptFiles:function(){this.fileEl.value=null,this.fileEl.click()},onFileSelect:function(e){var t=e.target.files;this.loadingFiles=!0,this.loadFiles(Array.from(t))}},Object(l["b"])("datasets",["loadFiles"]))},le=ce,de=(n("034f"),n("8824"),n("7496")),pe=n("b0af"),he=n("a75b"),fe=n("d903"),me=n("604c"),ve=Object(m["a"])(le,o,u,!1,null,"3cf9f198",null),be=ve.exports;k()(ve,{VApp:de["a"],VCard:pe["a"],VCol:J["a"],VContent:he["a"],VIcon:I["a"],VItem:fe["a"],VItemGroup:me["b"],VRow:ne["a"],VSelect:re["a"]});n("4160"),n("d3b7"),n("159b"),n("ddb0"),n("96cf");var ge=n("1da1"),ye=n("ade3"),we=(n("baa5"),n("ace4"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("10d1"),n("d4ec")),xe=n("bee2"),Se=512,ke={NRRD:"nrrd",DICOM:"dcm"},De=[{type:ke.NRRD,header:Array.from("NRRD").map((function(e){return e.charCodeAt(0)}))},{type:ke.DICOM,skip:128,header:Array.from("DICM").map((function(e){return e.charCodeAt(0)}))}];function Ie(e,t){if(t.length>e.length)return!1;for(var n=0;n<t.length;n+=1)if(t[n]!==e[n])return!1;return!0}function Ce(e){var t=e.lastIndexOf(".");return t>-1?e.slice(t+1):""}function Re(e){return Oe.apply(this,arguments)}function Oe(){return Oe=Object(ge["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.slice(0,Se),a=new window.FileReader;a.onload=function(){for(var t=new Uint8Array(a.result),r=0;r<De.length;r+=1){var i=De[r],s=i.type,o=i.header,u=i.skip,c=void 0===u?0:u;if(Ie(t.slice(c),o))return void e(s)}n(new Error("Unknown file"))},a.readAsArrayBuffer(r)})));case 1:case"end":return e.stop()}}),e)}))),Oe.apply(this,arguments)}function $e(e,t){return je.apply(this,arguments)}function je(){return je=Object(ge["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=new window.FileReader;r.onload=function(){return e(r.result)};var a="readAs".concat(n);if(!r[a])throw new TypeError("readAs".concat(n," is not a function"));r[a](t)})));case 1:case"end":return e.stop()}}),e)}))),je.apply(this,arguments)}function Pe(e){return Me.apply(this,arguments)}function Me(){return Me=Object(ge["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",$e(t,"ArrayBuffer"));case 1:case"end":return e.stop()}}),e)}))),Me.apply(this,arguments)}var Ve=function(){function e(){Object(we["a"])(this,e),this.fileReaders=Object.create(null),this.typeCache=new WeakMap}return Object(xe["a"])(e,[{key:"registerReader",value:function(e,t){this.fileReaders[e.toLowerCase()]=t}},{key:"getReader",value:function(e){return this.fileReaders[e.toLowerCase()]||null}},{key:"getFileType",value:function(){var e=Object(ge["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.typeCache.has(t)){e.next=2;break}return e.abrupt("return",this.typeCache.get(t));case 2:if(n=null,r=Ce(t.name).toLowerCase(),!r){e.next=8;break}n=r,e.next=12;break;case 8:return e.next=10,Re(t);case 10:a=e.sent.toLowerCase(),a&&(n=a);case 12:return this.typeCache.set(t,n),e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"canRead",value:function(e){var t=this.getFileType(e);return!!this.fileReaders[t]}},{key:"parseFile",value:function(){var e=Object(ge["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.getFileType(t),n){e.next=3;break}throw new Error("No type info found for ".concat(t.name));case 3:if(r=this.fileReaders[n],r){e.next=6;break}throw new Error("No reader found for ".concat(t.name));case 6:return e.abrupt("return",r(t));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Te=function(e){var t=e.loader,n=e.dicomDB;return{namespaced:!0,state:{errors:{},patients:[],patientStudies:{},studySeries:{}},mutations:{setError:function(e,t){var n=t.name,r=t.error;e.errors=Object(c["a"])({},e.errors,Object(ye["a"])({},n,r))},updatePatients:function(e,t){e.patients=t},updateStudies:function(e,t){e.patientStudies=t},updateSeries:function(e,t){e.studySeries=t},updateImages:function(e,t){e.seriesImages=t}},actions:{loadFiles:function(e,t){var n=e.commit,r=e.dispatch;return Object(ge["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled(t.map((function(e){return r("loadSingleFile",e)})));case 2:return a=e.sent,a.forEach((function(e,r){if("rejected"===e.status){var a=t[r].name;n("setError",a,e.reason)}})),e.abrupt("return",r("updateDICOM"));case 5:case"end":return e.stop()}}),e)})))()},loadSingleFile:function(e,r){return Object(ge["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getFileType(r);case 2:if(e.t0=e.sent,e.t1=ke.DICOM,e.t0!==e.t1){e.next=9;break}return e.next=7,n.importFile(r);case 7:e.next=11;break;case 9:return e.next=11,t.parseFile(r);case 11:case"end":return e.stop()}}),e)})))()},updateDICOM:function(e){var t=e.commit;n.postProcess();var r=n.getPatients(),a=n.getPatientStudyMap(),i=n.getStudySeriesMap(),s=n.getSeriesImagesMap();t("updatePatients",Array.from(r)),t("updateStudies",Object(c["a"])({},a)),t("updateSeries",Object(c["a"])({},i)),t("updateImages",Object(c["a"])({},s))}}}};i["a"].use(l["a"]);var _e=function(e){return{datasets:Te(e)}},ze=function(e){return new l["a"].Store({state:{},mutations:{},actions:{},modules:_e(e)})},Ee=n("f309");i["a"].use(Ee["a"]);var Ae=new Ee["a"]({});n("07ac");function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];while(e.length>0)e.pop().unsubscribe()}var Ue=Symbol("PXM_SUBS"),Fe=Symbol("PROXY_SUBS"),Le={install:function(e){e.mixin({beforeCreate:function(){var e=this.$options;this.$proxyManager=e.proxyManager||e.parent&&e.parent.$proxyManager},mounted:function(){var e=this;this.$options.proxyManagerHooks&&function(){var t=[],n={},r=e.$options.proxyManagerHooks;if(r.onProxyCreated||r.onProxyModified||r.onProxyDeleted||r.onProxyRegistrationChange){if(r.onProxyModified){for(var a=e.$proxyManager.getProxyGroups(),i=[],s=0;s<a.length;s++){var o=a[s];i=i.concat(e.$proxyManager.getProxyInGroup(o))}for(var u=0;u<i.length;u++){var c=i[u];n[c.getProxyId()]=c.onModified((function(t){return r.onProxyModified.call(e,t)}))}}t.push(e.$proxyManager.onProxyRegistrationChange((function(t){var a=t.action,i=t.proxyId,s=t.proxy;"register"===a?(r.onProxyCreated&&r.onProxyCreated.call(e,t),r.onProxyModified&&(n[i]=s.onModified((function(t){return r.onProxyModified.call(e,t)})))):"unregister"===a&&(i in n&&(n[i].unsubscribe(),delete n[i]),r.onProxyDeleted&&r.onProxyDeleted.call(e,t)),r.onProxyRegistrationChange&&r.onProxyRegistrationChange.call(e,t)})))}r.onActiveSourceChange&&t.push(e.$proxyManager.onActiveSourceChange((function(t){return r.onActiveSourceChange.call(e,t)}))),r.onActiveViewChange&&t.push(e.$proxyManager.onActiveViewChange((function(t){return r.onActiveViewChange.call(e,t)}))),e[Ue]=t,e[Fe]=n}()},beforeDestroy:function(){this[Ue]&&Ne(this[Ue]),this[Fe]&&(Ne(Object.values(this[Fe])),this[Fe]={})}})}},Be={install:function(e){e.prototype.$eventBus=new e}},We=(n("6062"),n("efd9")),Xe=n("c28d"),Ze=n("9070"),qe=n("1f07"),Ge=n("3509"),He=n.n(Ge),Ye=n("9efe");qe["a"].setReadImageArrayBufferFromITK(Ye["a"]);var Je=Array.from(new Set(Array.from(He.a.keys()).map((function(e){return e.toLowerCase()}))));function Ke(e){return Qe.apply(this,arguments)}function Qe(){return Qe=Object(ge["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe(t);case 2:return n=e.sent,r=qe["a"].newInstance(),r.setFileName(t.name),e.next=7,r.parseAsArrayBuffer(n);case 7:return a=r.getOutputData(),e.abrupt("return",(function(){return a}));case 9:case"end":return e.stop()}}),e)}))),Qe.apply(this,arguments)}function et(e){return tt.apply(this,arguments)}function tt(){return tt=Object(ge["a"])(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=!(r.length>1&&void 0!==r[1])||r[1],e.abrupt("return",function(){var e=Object(ge["a"])(regeneratorRuntime.mark((function e(r){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe(r);case 2:return a=e.sent,i=t.newInstance(),n?i.parseAsArrayBuffer(a):i.parseAsText(a),s=i.getOutputData(),e.abrupt("return",(function(){return s}));case 7:case"end":return e.stop()}}),e)})));function r(t){return e.apply(this,arguments)}return r}());case 2:case"end":return e.stop()}}),e)}))),tt.apply(this,arguments)}function nt(e){Je.forEach((function(t){return e.registerReader(t,Ke)})),e.registerReader("vti",et(We["a"])),e.registerReader("vtp",et(Xe["a"])),e.registerReader("stl",et(Ze["a"]))}var rt=n("13b0"),at=(n("afa9"),n("bc14")),it=n("9426"),st=n("5f07"),ot=n("fe72");n("defd");function ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{class:e,options:Object(c["a"])({links:n,ui:t},r),props:a}}function ct(e,t,n){return ut(e,[],[],t,n)}var lt={definitions:{Proxy:{LookupTable:ut(at["a"],[],[],{presetName:"Default (Cool to Warm)"}),PiecewiseFunction:ut(it["a"])},Sources:{TrivialProducer:ut(st["a"]),LabelMap:ut(st["a"])},Representations:{SliceZ:ut(ot["a"],[],[{link:"SliceZ",property:"slice",updateOnBind:!0,type:"application"}])},Views:{ViewX:ct(rt["a"],[],{axis:0}),ViewY:ct(rt["a"],[],{axis:1}),ViewZ:ct(rt["a"],[],{axis:2})}},representations:{ViewX:{vtkImageData:{name:"SliceX"}},ViewY:{vtkImageData:{name:"SliceY"}},ViewZ:{vtkImageData:{name:"SliceZ"}}}},dt=(n("7db0"),n("99de")),pt=n("7e84"),ht=n("262e"),ft=n("c141"),mt=n.n(ft),vt="UNSPECIFIED",bt=function(){function e(){Object(we["a"])(this,e)}return Object(xe["a"])(e,[{key:"importFile",value:function(){var e=Object(ge["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("Abstract");case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"postProcess",value:function(){var e=Object(ge["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("Abstract");case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPatients",value:function(){throw new Error("Abstract")}},{key:"getPatientStudyMap",value:function(){throw new Error("Abstract")}},{key:"getStudySeriesMap",value:function(){throw new Error("Abstract")}},{key:"getSeriesImagesMap",value:function(){throw new Error("Abstract")}},{key:"getSeriesAsDataset",value:function(){var e=Object(ge["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("Abstract");case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),gt=function(){function e(t){Object(we["a"])(this,e),this.patientID=null,this.name=null,this.birthDate=null,this.sex=null,this.comments=null,t&&this.update(t)}return Object(xe["a"])(e,[{key:"update",value:function(e){this.patientID=e.patientID||this.patientID,this.name=e.name||this.name,this.birthDate=e.birthDate||this.birthDate,this.sex=e.sex||this.sex,this.comments=e.comments||this.comments}}]),e}(),yt=function(){function e(t){Object(we["a"])(this,e),this.instanceUID=null,this.studyID=null,this.date=null,this.time=null,this.accessionNumber=null,this.description=null,t&&this.update(t)}return Object(xe["a"])(e,[{key:"update",value:function(e){this.instanceUID=e.instanceUID||this.instanceUID,this.studyID=e.studyID||this.studyID,this.date=e.date||this.date,this.time=e.time||this.time,this.accessionNumber=e.accessionNumber||this.accessionNumber,this.description=e.description||this.description}}]),e}(),wt=function(){function e(t){Object(we["a"])(this,e),this.instanceUID=null,this.modality=null,this.number=null,this.date=null,this.time=null,this.description=null,t&&this.update(t)}return Object(xe["a"])(e,[{key:"update",value:function(e){this.instanceUID=e.instanceUID||this.instanceUID,this.modality=e.modality||this.modality,this.number=e.number||this.number,this.date=e.date||this.date,this.time=e.time||this.time,this.description=e.description||this.description}}]),e}(),xt=function(){function e(t){Object(we["a"])(this,e),this.instanceNumber=null,this.imageType=null,this.comments=null,this.filename=null,this.pixelData=null,this.rows=null,this.cols=null,this.minValue=null,this.maxValue=null,t&&this.update(t)}return Object(xe["a"])(e,[{key:"update",value:function(e){this.instanceNumber=e.instanceNumber||this.instanceNumber,this.imageType=e.imageType||this.imageType,this.number=e.number||this.number,this.date=e.date||this.date,this.comments=e.comments||this.comments,this.filename=e.filename||this.filename,this.pixelData=e.pixelData||this.pixelData,this.rows=e.rows||this.rows,this.cols=e.cols||this.cols,this.minValue=e.minValue||this.minValue,this.maxValue=e.maxValue||this.maxValue}}]),e}();function St(e){return e.value?e.value[0]:null}var kt=function(e){function t(){var e;return Object(we["a"])(this,t),e=Object(dt["a"])(this,Object(pt["a"])(t).call(this)),e.$daikonSeries={},e.$patients=[],e.$patientTable={},e.$patientStudies={},e.$studyTable={},e.$studySeries={},e.$seriesTable={},e.$seriesImages={},e}return Object(ht["a"])(t,e),Object(xe["a"])(t,[{key:"importFile",value:function(){var e=Object(ge["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe(t);case 2:if(n=e.sent,r=mt.a.Series.parseImage(new DataView(n)),r){e.next=6;break}throw new Error("Failed to read image from ".concat(t.name));case 6:if(r.hasPixelData()){e.next=8;break}throw new Error("Image ".concat(t.name," did not have pixel data"));case 8:if(a=r.getSeriesInstanceUID(),!this.$seriesImages[a]){e.next=14;break}if(i=r.getImageNumber(),s=this.$seriesImages[a].find((function(e){return e.instanceNumber===i&&t.name===e.filename})),!s){e.next=14;break}return e.abrupt("return");case 14:a in this.$daikonSeries||(this.$daikonSeries[a]=new mt.a.Series),this.$daikonSeries[a].addImage(r),this.updateDB(r,t.name);case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"postProcess",value:function(){var e=Object(ge["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object.keys(this.$daikonSeries).forEach((function(e){t.$daikonSeries[e].buildSeries()}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPatients",value:function(){return this.$patients}},{key:"getPatientStudyMap",value:function(){return this.$patientStudies}},{key:"getStudySeriesMap",value:function(){return this.$studySeries}},{key:"getSeriesImagesMap",value:function(){return this.$seriesImages}},{key:"getSeriesAsDataset",value:function(){var e=Object(ge["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var a=n.$daikonSeries[t];a?a.concatenateImageData(null,e):r(new Error("Cannot find series ".concat(t)))})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateDB",value:function(e,t){var n=e.getPatientID()||vt;if(!(n in this.$patientTable)){var r=new gt({patientID:n});this.$patients.push(r),this.$patientTable[n]=r,this.$patientStudies[n]=[]}var a={name:e.getPatientName(),birthDate:St(e.getTag(16,48)),sex:St(e.getTag(16,64)),comments:St(e.getTag(16,16384))},i=this.$patientTable[n];i.update(a);var s=St(e.getTag(32,13));if(!(s in this.$studyTable)){var o=new yt({instanceUID:s});this.$patientStudies[n].push(o),this.$studyTable[s]=o,this.$studySeries[s]=[]}var u={studyID:St(e.getTag(32,16)),date:e.getStudyDate(),time:e.getStudyTime(),accessionNumber:St(e.getTag(8,80)),description:St(e.getTag(8,4144))},c=this.$studyTable[s];c.update(u);var l=e.getSeriesInstanceUID();if(!(l in this.$seriesTable)){var d=new wt({instanceUID:l});this.$studySeries[s].push(d),this.$seriesTable[l]=d,this.$seriesImages[l]=[]}var p={modality:e.getModality(),number:e.getSeriesNumber(),date:St(e.getTag(8,33)),time:St(e.getTag(8,49)),description:e.getSeriesDescription()},h=this.$seriesTable[l];h.update(p);var f=new xt({instanceNumber:e.getImageNumber(),imageType:e.getImageType(),comments:St(e.getTag(32,16384)),filename:t,pixelData:e.getInterpretedData(!1,!1),rows:e.getRows(),cols:e.getCols(),minValue:e.getImageMin(),maxValue:e.getImageMax()});this.$seriesImages[l].push(f)}}]),t}(bt);i["a"].config.productionTip=!1,i["a"].use(Le),i["a"].use(Be);var Dt=s["a"].newInstance({proxyConfiguration:lt}),It=new Ve;nt(It);var Ct=new kt,Rt={proxyManager:Dt,loader:It,dicomDB:Ct};new i["a"]({store:ze(Rt),vuetify:Ae,proxyManager:Dt,render:function(e){return e(be)}}).$mount("#app")},"59ce":function(e,t,n){},7084:function(e,t,n){"use strict";var r=n("9bd7"),a=n.n(r);a.a},"73b7":function(e,t,n){"use strict";var r=n("59ce"),a=n.n(r);a.a},8824:function(e,t,n){"use strict";var r=n("ecdf"),a=n.n(r);a.a},"8a23":function(e,t,n){},"9bd7":function(e,t,n){},c4bc:function(e,t,n){},ecdf:function(e,t,n){}});
//# sourceMappingURL=app.94c9255b.js.map